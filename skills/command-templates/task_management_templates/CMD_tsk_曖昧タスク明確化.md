# CMD_tsk_曖昧タスク明確化

最終更新日時: 2025年12月25日 9:06

## 📌 コマンド概要

**目的**: あいまいな指示や不明確なタスク内容を、コンテキストリサーチとHITLでユーザー確認しながら、LLMが実行可能な明確なタスクに変換する

**用途**:

- 断片的な指示やメモから具体的なアクションアイテムを抽出
- プロジェクト文脈を自動補完して実行可能なタスクに変換
- 収集したコンテキストをMarkdownファイルとして資産化

**実行時間**: 3-5分

---

## 📥 Input

### 必須項目

- **曖昧なタスク内容** (必須): 断片的な指示、メモ、ざっくりとしたやることリスト

### オプション項目

- **関連プロジェクト名** (オプション): 既知の場合、プロジェクト名やキーワード
- **緊急度** (オプション): 高/中/低
- **担当者** (オプション): 実行予定者

### 入力例

```
CMD_曖昧タスク明確化 を実行してください

内容:
• 発散として来ているコメントの中身を読む
• 戦略コンセプトについてやりとりしたスレッドを探す
• ExampleService・投稿機能で足りていない機能を整理
  ◦ DB周りの問題点解決
  ◦ UI上の問題点の解決
  ◦ エンジニアに相談すべき事項整理
• プロダクトイメージとしてまとめる
```

---

## 📤 Output

### 作成されるファイル構造

```
Flow/
└── YYYYMM/
    └── YYYY-MM-DD/
        └── task_clarification_[プロジェクト名]_YYYYMMDD.md
            - 📋 元のタスク内容
            - 🔍 収集したコンテキスト
            - ✅ 明確化されたタスクリスト
            - 💬 確認が必要な点
            - 🔗 関連リソース
```

### 出力内容

1. **コンテキストファイル**: 収集した関連情報を整理したMarkdownファイル
2. **明確化されたタスクリスト**: 実行可能な粒度に分解されたタスク
3. **確認事項リスト**: HITLで確認すべきポイント
4. **関連リソースパス**: 見つかったファイル、スレッド、ドキュメントへのパス

---

## 🔧 実行方法

AIアシスタントに以下のように依頼してください:

```
CMD_曖昧タスク明確化 を実行してください

[曖昧なタスク内容をペースト]
```

または、ファイルを選択した状態で:

```
選択中のタスク内容を明確化してください
```

---

## 📋 処理ロジック

### ステップ1: 初期分析 (30秒)

**入力内容の解析**

1. タスク内容から主要キーワードを抽出
2. プロジェクト名、機能名、人名などの固有名詞を特定
3. 不明確な点をリストアップ

**例**:

```jsx
抽出されたキーワード:
- 投稿機能
- DB周り
- UI
- 戦略コンセプト
- コメント

不明確な点:
- どのプロジェクトの話か?
- ExampleServiceとは?
- どのコメントを指しているか?
- どのスレッドを探すべきか?
```

### ステップ2: コンテキストリサーチ (60-90秒)

**検索優先順位**:

1. **Flow の最近の日付フォルダ** (直近2週間)
    - 検索クエリ: 抽出されたキーワード
    - 探すもの: 関連する議事録、タスク、メモ
2. **Stock の Projects**
    - 検索クエリ: プロジェクト名候補
    - 探すもの: プロジェクト概要、仕様書、PRD
3. **Slack (該当する場合)**
    - 検索クエリ: プロジェクト名 + 「コメント」「戦略」
    - 探すもの: 関連スレッド、ディスカッション
4. **GitHub (該当する場合)**
    - 検索クエリ: リポジトリ名 + 機能名
    - 探すもの: Issue、PR、コメント

**検索結果の整理**:

```jsx
見つかった情報:
✓ プロジェクト: ProjectAlpha
✓ 関連ページ: ProjectAlpha PRD, スプリントレビュー議事録
✓ Slackスレッド: #projectalpha-devチャンネル
✗ 「ExampleService」の明確な定義は見つからず
```

### ステップ3: HITL確認 (60秒)

**ユーザーへの確認**:

```jsx
🔍 コンテキストリサーチ結果

以下の情報を見つけました:

**プロジェクト特定**
ProjectAlphaプロジェクトに関連する内容と推測しました。
[関連ページリンク]

**不明点の確認**

1. 「ExampleService・投稿機能」について
   → これは外部サービス「ExampleService」との連携機能のことでしょうか?
   → それとも社内の別の呼称ですか?

2. 「発散として来ているコメント」について
   → どこに来ているコメントを指していますか?
   - A) ワークスペース内のドキュメント
   - B) Slackのスレッド
   - C) GitHub Issue
   - D) その他

3. 「戦略コンセプトのスレッド」について
   → いつ頃のやりとりですか?
   - A) 直近1週間
   - B) 直近1ヶ月
   - C) それ以前

以下で正しいですか?
- プロジェクト: ProjectAlpha
- 関連する機能領域: データベース設計、UI実装
- 次のアクション: エンジニアとの相談準備
```

### ステップ4: コンテキストページ作成 (30秒)

**作成場所**: Flow/YYYYMM/YYYY-MM-DD/

**ページ構造**:

```markdown
# [タスク明確化] ProjectAlpha関連タスク整理_20251215

## 📋 元のタスク内容
[ユーザーが入力した元の内容]

## 🔍 収集したコンテキスト

### プロジェクト情報
- **プロジェクト名**: ProjectAlpha
- **概要**: 外部サービスとの連携機能を持つWebアプリケーション
- **関連ページ**: [リンク]

### 関連リソース
- 議事録: [ProjectAlpha Sprint Review]
- 技術仕様: [ProjectAlpha PRD]
- Slackスレッド: [#projectalpha-dev]

### 用語・固有名詞の定義
- **ExampleService**: [確認結果に基づく定義]
- **投稿機能**: [確認結果に基づく定義]

## 💬 ユーザー確認結果
[HITLで確認した内容]

## ✅ 明確化されたタスクリスト
[次のステップで生成]

## 🔗 参考リンク
- [関連ページ1]
- [関連ページ2]
```

### ステップ5: タスク明確化と分解 (60秒)

**確認結果を踏まえてタスクを明確化**:

```markdown
## ✅ 明確化されたタスクリスト

### 1. コメントレビュー
- [ ] Slackの#projectalpha-devチャンネルで「ExampleService連携」に関するコメントを読む
- [ ] 期間: 直近1週間
- [ ] 特に注目: 機能要望、課題、フィードバック

### 2. 戦略コンセプト調査
- [ ] ワークスペース内で「ProjectAlpha 戦略」「コンセプト」で検索
- [ ] 対象: 直近1ヶ月の議事録、Flowファイル
- [ ] まとめ先: このファイルの「戦略コンセプトまとめ」セクション

### 3. ExampleService連携機能の課題整理

#### 3.1 DB設計の課題
- [ ] 現在のDBスキーマを確認
- [ ] ExampleServiceのデータ構造と照合
- [ ] 不足しているテーブル・カラムをリストアップ

#### 3.2 UI実装の課題
- [ ] 投稿フォームのUIワイヤーフレーム確認
- [ ] 必要なUIコンポーネントのリストアップ
- [ ] 既存UIとの整合性チェック

### 4. エンジニア相談準備
- [ ] 上記の課題を整理してドキュメント化
- [ ] 技術的な制約・懸念事項をまとめる
- [ ] MTG日程調整
- [ ] 相談アジェンダ作成

### 5. プロダクトイメージ作成
- [ ] ユーザーストーリー作成
- [ ] 画面遷移図作成
- [ ] 機能一覧まとめ
```

### ステップ6: 完了報告 (15秒)

```
✅ タスクの明確化が完了しました!

📄 作成したファイル:
Flow/202512/2025-12-15/task_clarification_ProjectAlpha_20251215.md

📊 成果:
- 元のタスク: 7項目 (曖昧)
- 明確化後: 15項目 (実行可能)
- 収集したコンテキスト: 5ページ
- 関連リソース: 8リンク

🎯 次のアクション:
1. コメントレビューから着手することをお勧めします
2. 不明点が解消されたら、各タスクを今日のタスクファイルに追加できます

💡 このコンテキストファイルは再利用可能です:
- 今後の類似タスクの参考資料
- エンジニアMTGの事前共有資料
- プロジェクトドキュメントとしての保管
```

---

## ⚠️ 注意事項

### エラーハンドリング

1. **プロジェクトが特定できない場合**
    
    ```
    ⚠️ プロジェクトを特定できませんでした
    
    以下の情報を追加で教えてください:
    - このタスクはどのプロジェクトに関連しますか?
    - または、関連する最近の会議やドキュメントはありますか?
    ```
    
2. **キーワードが不明確な場合**
    
    ```
    ⚠️ 専門用語や固有名詞の定義が必要です
    
    以下の用語について説明をお願いできますか:
    - 「書き込み想定」: [説明を入力]
    ```
    
3. **関連情報が見つからない場合**
    
    ```
    ⚠️ 関連する情報がワークスペース内に見つかりませんでした
    
    以下の方法をお試しください:
    - Slackやメールで関連する情報を探す
    - プロジェクトメンバーに直接確認する
    - 新規プロジェクトの場合は、まずプロジェクト概要ファイルを作成
    ```
    

### 実行時間

- 目標: 5分以内
- ステップ1: 30秒
- ステップ2: 60-90秒
- ステップ3: 60秒
- ステップ4: 30秒
- ステップ5: 60秒
- ステップ6: 15秒

### ベストプラクティス

1. **検索は広く、確認は狭く**
    - 検索は幅広いキーワードで実施
    - HITLでは具体的な選択肢を提示
2. **コンテキストは必ず保存**
    - 今回使わない情報も後で役立つ可能性
    - 再検索のコストを削減
3. **タスクは実行可能な粒度に**
    - 「整理する」→「リストアップする」「ドキュメント化する」
    - 「確認する」→「Aを見る」「Bと照合する」
4. **リンクは必ず含める**
    - 元情報へのトレーサビリティ確保
    - 後から見直す際の効率化

---

## 💡 活用例

### 例1: 会議メモからのタスク抽出

**Input**:

```
MTGメモ:
- 例の件、山下さんに確認
- DB設計見直し
- 来週までにデモ準備
```

**Output**:

```jsx
✅ 明確化されたタスク:
1. ProjectAlpha関連事項を山田さんに確認
   - 対象: 定例MTGで議論された内容
   - 方法: Slack DM or 次回MTG
2. ProjectAlpha DBスキーマのレビュー
   - 対象: users, posts, integrations テーブル
   - 観点: ExampleService連携に必要なカラム追加
3. スプリントレビュー用デモ準備
   - 期限: 12/17 (火)
   - 内容: データ連携〜表示までの一連のフロー
```

### 例2: Slackメッセージからのアクション抽出

**Input**:

```
@miyatti あの機能、どうなってる?
あと、ドキュメントも更新しといて
```

**Output**:

```
⚠️ 確認が必要です:

1. 「あの機能」の特定:
   最近のスレッドから以下が候補です:
   - A) ワークフロー実行ノード機能
   - B) ファイルドラッグ&ドロップ機能
   - C) エージェントチャット機能
   
2. 更新すべきドキュメント:
   - 技術仕様書?
   - ユーザーガイド?
   - README?
```

### 例3: 断片的なメモの体系化

**Input**:

```
- コンテキスト読み込み
- プロンプト生成
- 結果確認
- エラー対応
```

**Output**:

```jsx
✅ 「ProjectAlpha データ連携機能実装」タスクとして体系化:

### フェーズ1: コンテキスト機能
- [ ] ファイルアップロード機能の実装
- [ ] コンテキストバケット作成
- [ ] ファイル内容の解析・インデックス化

### フェーズ2: AI統合
- [ ] プロンプトテンプレート設計
- [ ] OpenAI API統合
- [ ] コンテキスト参照ロジック実装

### フェーズ3: 結果処理
- [ ] レスポンスパース処理
- [ ] UI表示実装
- [ ] 結果の保存機能

### フェーズ4: エラーハンドリング
- [ ] API エラー対応
- [ ] タイムアウト処理
- [ ] ユーザーへのエラー通知
```

---

## 🔗 関連リソース

- CMD_日次タスク作成 (類似コマンド)
- CTX_abstract_mode_rules (コンテキスト収集ルール)
- Flow (作成先フォルダ)

---

**作成日**: 2025-12-15

**作成者**: miyatti

**ステータス**: 完了