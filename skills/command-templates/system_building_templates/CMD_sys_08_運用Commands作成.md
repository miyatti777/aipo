# CMD_sys_08_運用Commands作成

最終更新日時: 2025年12月25日 9:06

# 08_運用Commands作成

## 🎯 Goal

Abstract Modeで構築した実行プラットフォームの「運用Commands」を作成します。

運用Commandsは、構築したDatabaseを操作し、データ処理・ページ生成などを自動実行する実行ロジックです。

---

## 📋 Deliverable

- **📁 運用コマンド/フォルダ** - 運用Commands群を格納
- **CMD-XXX-001, 002...** - 各処理ステップのコマンドページ
- **実行例ドキュメント** - 運用Commandsの使い方ガイド

---

## ⏱️ 推定時間

**2〜3時間** （コマンド数により変動）

---

## 📝 実行手順

### Step 1: 運用フローの分析

構築したDatabaseとワークフローから、必要な運用Commandsを特定します。

**分析ポイント**:

- データの流れ（入力 → 処理 → 出力）
- 繰り返し実行される処理
- 自動化すべき処理

**例**: 記事制作システム

```yaml
ワークフロー:
  1. 入力データ登録（Form）
  2. 入力データ分析 ← 運用Command
  3. 構成案生成 ← 運用Command
  4. 執筆支援 ← 運用Command
  5. レビュー管理 ← 運用Command

運用Commands:
  - CMD-SG1-001: 入力分析
  - CMD-SG1-002: 構成案生成
  - CMD-SG1-003: 執筆支援
  - CMD-SG1-004: レビュー依頼
```

---

### Step 2: 運用コマンド/フォルダ作成

Layerルート直下に「📁 運用コマンド」フォルダを作成します。

```jsx
📁 [Layer]/
├── 📄 layer.yaml
├── 📄 tasks.yaml
├── 📁 Commands/（プロジェクト管理用）
├── 📁 運用コマンド/  ← 🆕 作成
│   ├── 📄 CMD-SG1-001
│   ├── 📄 CMD-SG1-002
│   └── ...
└── 📊 [Databases]
```

---

### Step 3: 各コマンドページの作成

各運用Commandページを以下の構造で作成します。

### コマンドページの標準構造

```markdown
# CMD-XXX-001: [コマンド名]

## 🎯 Goal

[このコマンドで達成すること]

---

## 📥 Input

**必須パラメータ**:
- `入力データ`: 対象ページのURL
- （その他変数）

**前提条件**:
- 入力データのステータスが「XXX」であること
- 必要なDatabaseが存在すること

---

## 📤 Output

- [生成される成果物1]
- [更新されるDatabase]
- [ステータス変更]

---

## 📋 実行手順

### Step 1: 入力データ読み込み

[具体的な処理内容]

### Step 2: データ処理

[具体的な処理内容]

### Step 3: 成果物生成

[具体的な処理内容]

### Step 4: Database更新

[具体的な処理内容]

---

## 💬 使用例

```

@rogos_05_operation を実行してください

Command: @CMD-XXX-001

入力データ: @page-123

```

---

## ⚙️ AIへの実行指示

<callout icon="🤖" color="purple_bg">
	**このコマンドが@rogos_05で呼び出されたとき:**
	
	1. [処理手順1の詳細]
	2. [処理手順2の詳細]
	3. [出力フォーマット]
	4. [Database更新の詳細]
</callout>
```

---

### Step 4: 実装例の作成

具体的な実装例を以下に示します。

### 例: CMD-SG1-001（入力分析コマンド）

```markdown
# CMD-SG1-001: 入力データ分析

## 🎯 Goal

記事入力管理DBに登録されたデータから、URL情報・テーマ・対象人物を分析し、YAML形式で構造化します。

---

## 📥 Input

**必須パラメータ**:
- `入力データ`: 記事入力管理DBのページURL

**前提条件**:
- ステータスが「入力済み」であること
- URL情報、テーマ、対象人物が入力されていること

---

## 📤 Output

- **YAML分析結果**: ページ本文に追記
  - `url_analysis`: URL先の内容分析
  - `theme_analysis`: テーマの深掘り分析
  - `person_analysis`: 対象人物の特性分析
- **ステータス更新**: 「入力済み」→「分析完了」

---

## 📋 実行手順

### Step 1: 入力データ読み込み

1. 指定されたページを読み込み
2. 以下のプロパティを取得:
   - URL情報
   - テーマ
   - 対象人物

### Step 2: URL分析

1. URL先のコンテンツを取得・分析
2. 以下を抽出:
```

url_analysis:

title: "記事タイトル"

author: "著者名"

publish_date: "公開日"

key_themes:

- テーマ1
- テーマ2

notable_quotes:

- "引用1"
- "引用2"

```

### Step 3: テーマ分析

1. テーマの意図・背景を分析
2. YAML形式で出力:
```

theme_analysis:

core_question: "中心的な問い"

target_insights:

- インサイト1
- インサイト2

related_concepts:

- 関連概念1
- 関連概念2

```

### Step 4: 対象人物分析

1. 対象人物の特性・背景を分析
2. YAML形式で出力:
```

person_analysis:

background:

role: "役職"

expertise:

- 専門領域1
- 専門領域2

communication_style:

tone: "トーン"

key_phrases:

- 特徴的な言い回し1

```

### Step 5: 結果の保存

1. 分析結果をページ本文に追記（YAML形式）
2. ステータスを「分析完了」に更新

---

## 💬 使用例

```

@rogos_05_operation を実行してください

Command: @CMD-SG1-001

入力データ: @入力ページ

```

---

## ⚙️ AIへの実行指示

<callout icon="🤖" color="purple_bg">
	**このコマンドが@rogos_05で呼び出されたとき:**
	
	1. **入力ページを読み込む**（view tool）
	2. **URL先のコンテンツを取得・分析**（view tool + 内容分析）
	3. **テーマの深掘り分析**（背景・意図・関連概念を抽出）
	4. **対象人物の特性分析**（役職・専門性・コミュニケーションスタイル）
	5. **YAML形式で本文に追記**（update-page-v2）
	   - 既存の本文は保持
	   - 末尾に分析結果を追加
	6. **ステータスを「分析完了」に更新**（update-page-v2）
	
	**出力フォーマット**:
```

# 分析結果（CMD-SG1-001実行）

url_analysis:

...

theme_analysis:

...

person_analysis:

...

```
</callout>
```

---

### Step 5: 実行例ドキュメント作成

運用Commandsフォルダ直下に「📄 使い方ガイド」を作成します。

```markdown
# 運用Commands 使い方ガイド

## 📚 コマンド一覧

<table header-row="true">
<tr>
<td>コマンド</td>
<td>目的</td>
<td>Input</td>
<td>Output</td>
</tr>
<tr>
<td>CMD-SG1-001</td>
<td>入力データ分析</td>
<td>入力ページ</td>
<td>YAML分析結果</td>
</tr>
<tr>
<td>CMD-SG1-002</td>
<td>構成案生成</td>
<td>分析済みページ</td>
<td>構成案DB（3-5件）</td>
</tr>
</table>

## 🔄 実行フロー

```

1. データ入力（Form）
    
    ↓
    
2. @rogos_05 + @CMD-SG1-001
    
    ↓
    
3. @rogos_05 + @CMD-SG1-002
    
    ↓
    
4. 成果物確認

```

## 💬 実行例

[具体的な実行例を記載]
```

---

## ✅ 完了条件

以下が全て揃っていることを確認:

- [ ]  📁 運用コマンド/フォルダが作成されている
- [ ]  各CMD-XXXページが作成されている
- [ ]  各コマンドに以下が記載されている:
    - [ ]  Goal（目的）
    - [ ]  Input（入力パラメータ）
    - [ ]  Output（成果物）
    - [ ]  実行手順（ステップバイステップ）
    - [ ]  AIへの実行指示
- [ ]  使い方ガイドが作成されている
- [ ]  実行テストが完了している（少なくとも1コマンド）

---

## 🔗 参照リソース

- [CTX_abstract_mode_rules](../../abstract-mode.md)
- SG1実装例: 運用コマンド（実際の実装を参照）

---

## ⚙️ AIへの実行指示

<aside>
🤖

**このタスクが@rogos_04_executeで呼び出されたとき:**

1. **運用フローの分析**
    - 構築済みのDatabaseを確認
    - データの流れを特定
    - 必要な運用Commandsをリストアップ
2. **📁 運用コマンド/フォルダ作成**
    - Layerルート直下に作成
3. **各コマンドページ作成**
    - 標準構造に従って作成
    - Goal, Input, Output, 実行手順, AIへの指示を明記
4. **使い方ガイド作成**
    - コマンド一覧
    - 実行フロー
    - 実行例
5. **実行テスト**
    - 少なくとも1つのコマンドで動作確認
    - @rogos_05_operationで実行

**重要な原則**:

- 運用Commandsは「実行可能」であること
- AIへの指示は具体的に（ツール名、パラメータまで記載）
- Database操作を必ず含める（読み取り・更新・作成）
</aside>

---

**作成日**: 2025-12-08

**ステータス**: Ready